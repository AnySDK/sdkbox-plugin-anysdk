--- AppDelegate.cpp	2015-09-09 17:01:08.000000000 +0800
+++ AppDelegate1.cpp	2015-09-09 17:11:30.000000000 +0800
@@ -15,8 +15,10 @@
 #include "jsb_opengl_registration.h"
 #include "XMLHTTPRequest.h"
 #include "jsb_websocket.h"
-#if (CC_TARGET_PLATFORM == CC_PLATFORM_ANDROID) && (CC_TARGET_PLATFORM == CC_PLATFORM_IOS)
+#if (CC_TARGET_PLATFORM == CC_PLATFORM_ANDROID || CC_TARGET_PLATFORM == CC_PLATFORM_IOS)
 #include "AgentManager.h"
+#include "jsb_anysdk_manual.hpp"
+#include "jsb_anysdk_auto.hpp"
 using namespace anysdk::framework;
 #endif
 
@@ -30,18 +32,18 @@
 AppDelegate::~AppDelegate()
 {
     CCScriptEngineManager::purgeSharedManager();
-#if (CC_TARGET_PLATFORM == CC_PLATFORM_ANDROID) && (CC_TARGET_PLATFORM == CC_PLATFORM_IOS)
+#if (CC_TARGET_PLATFORM == CC_PLATFORM_ANDROID || CC_TARGET_PLATFORM == CC_PLATFORM_IOS)
     AgentManager::getInstance()->unloadAllPlugins();
 #endif
 }
 
 bool AppDelegate::applicationDidFinishLaunching()
 {
-#if (CC_TARGET_PLATFORM == CC_PLATFORM_ANDROID) && (CC_TARGET_PLATFORM == CC_PLATFORM_IOS)
+#if (CC_TARGET_PLATFORM == CC_PLATFORM_ANDROID || CC_TARGET_PLATFORM == CC_PLATFORM_IOS)
     /**
      * appKey、appSecret、privateKey需要从打包工具中游戏管理界面获取，替换
      * oauthLoginServer参数是游戏服务提供的用来做登陆验证转发的接口地址。
-    */
+     */
     std::string oauthLoginServer = "OAUTH_LOGIN_SERVER";
     std::string appKey = "APP_KEY";
     std::string appSecret = "APP_SERCRET";
@@ -76,6 +78,10 @@
     sc->addRegisterCallback(JSB_register_opengl);
     sc->addRegisterCallback(MinXmlHttpRequest::_js_register);
     sc->addRegisterCallback(register_jsb_websocket);
+#if (CC_TARGET_PLATFORM == CC_PLATFORM_ANDROID || CC_TARGET_PLATFORM == CC_PLATFORM_IOS)
+    sc->addRegisterCallback(register_all_anysdk);
+    sc->addRegisterCallback(register_all_anysdk_manual);
+#endif
 
     sc->start();
     
